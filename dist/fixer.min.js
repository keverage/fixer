!function(t){"use strict";t.Fixer=function(e,s){return this.elements={fixer:e,container:null},t.extend(!0,this.settings={},t.Fixer.defaults,s),this.state="default",this.scrollTop=0,this.previousScrollTop=0,this.start=0,this.end=0,!!this.prepareOptions()&&this.init()},t.Fixer.defaults={container:void 0,start:void 0,end:void 0,offset:0,reverse:!1,scrollEvent:!0,resizeEvent:!0,resizeTimeout:100,autoLoad:!0,autoUpdate:!0,classes:{prefix:"fixer",container:"{prefix}-container",element:"{prefix}-element",input:"is-input",fixed:"is-fixed",bottom:"is-bottom",reset:"is-reset"},afterEventsHandler:void 0,onScroll:void 0,onResize:void 0,onFixed:void 0,onBottom:void 0,onReset:void 0,onChangeState:void 0,debug:!1},t.Fixer.prototype={prepareOptions:function(){let e=this;return e.elements.container=void 0!==e.settings.container&&e.settings.container.length?e.settings.container:t("body"),e.setStart(e.settings.start),e.setEnd(e.settings.end),t.each(e.settings.classes,function(t,s){"string"==typeof s&&(e.settings.classes[t]=s.replace(/{prefix}/,e.settings.classes.prefix))}),e.settings.debug&&(void 0===e.settings.onScroll&&(e.settings.onScroll=function(){console.log("scrollTop: "+this.fixer.scrollTop)}),void 0===e.settings.onChangeState&&(e.settings.onChangeState=function(){console.log("state: "+this.state)})),!0},init:function(){return this.elements.container.addClass(this.settings.classes.container),this.elements.fixer.addClass(this.settings.classes.element),this.eventsHandler(),this},destroy:function(){return this.reset(),this.setState("default"),this.elements.container.removeClass(this.settings.classes.container),this.elements.fixer.removeClass(this.settings.classes.element),t(window).off("."+this.settings.classes.prefix),this},update:function(){return this.setStart(),this.setEnd(),this},setStart:function(t){return this.start=parseInt(void 0!==t?this.elements.container.offset().top+t:this.elements.fixer.offset().top),this.settings.offset&&(this.start-=parseInt(this.settings.offset)),this.settings.debug&&console.log("start: "+this.getStart()),this},getStart:function(){return this.start},setEnd:function(t,e){return e=e||!0,this.end=parseInt(void 0!==t?t:this.elements.container.height()-this.elements.fixer.height()),void 0!==e&&!0===e&&(this.end+=this.getStart()),this.settings.offset&&(this.end-=parseInt(this.settings.offset)),this.settings.debug&&console.log("end: "+this.getEnd()),this},getEnd:function(){return this.end},setState:function(t){return this.state=t,this},getState:function(){return this.state},getScrollTop:function(t){return(t=t||!1)?this.previousScrollTop:this.scrollTop},eventsHandler:function(){let e=this,s=!1;return e.settings.scrollEvent&&t(window).on("scroll."+e.settings.classes.prefix,{self:e},e.scrollHandler),t(window).on("touchstart."+e.settings.classes.prefix,function(){s||(s=!0,e.elements.container.find(":input").on("focus."+e.settings.classes.prefix+" blur."+e.settings.classes.prefix,function(){e.elements.container.toggleClass(e.settings.classes.input)}))}),e.settings.autoLoad&&t(window).on("load."+e.settings.classes.prefix,{self:e},e.scrollHandler),e.settings.resizeEvent&&t(window).on("resize."+e.settings.classes.prefix+" orientationchange."+e.settings.classes.prefix,{self:e},e.resizeHandler),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({fixer:e,elements:e.elements}),e},scrollHandler:function(t){let e=void 0!==t&&void 0!==t.data&&void 0!==t.data.self?t.data.self:this;return window.requestAnimationFrame(function(){e.scrollTop=window.pageYOffset,e.settings.reverse?(e.getScrollTop("previous")>e.getScrollTop()&&e.getScrollTop()>=e.getStart()?e.fixed():(e.getScrollTop("previous")<e.getScrollTop()||e.getScrollTop()<e.getStart())&&e.reset(),e.previousScrollTop=e.getScrollTop()):e.getScrollTop()>e.getStart()&&e.getScrollTop()<=e.getEnd()?e.fixed():e.scrollTop>=e.getEnd()?e.bottom():e.reset(),void 0!==e.settings.onScroll&&e.settings.onScroll.call({fixer:e,event:void 0===t.data?t.event:t,state:e.getState()})}),e},resizeHandler:function(t){let e=void 0!==t&&void 0!==t.data&&void 0!==t.data.self?t.data.self:this,s=void 0;return clearTimeout(s),s=setTimeout(function(){e.settings.autoUpdate&&e.update(),void 0!==e.settings.onResize&&e.settings.onResize.call({fixer:e,event:void 0===t.data?t.event:t,start:e.getStart(),end:e.getEnd()})},e.settings.resizeTimeout),e},fixed:function(){return"fixed"!==this.getState()&&(void 0!==this.settings.onFixed&&this.settings.onFixed.call(this),this.elements.container.removeClass(this.settings.classes.reset).removeClass(this.settings.classes.bottom).addClass(this.settings.classes.fixed),this.setState("fixed"),void 0!==this.settings.onChangeState&&this.settings.onChangeState.call({fixer:this,state:this.getState()})),this},bottom:function(){return"bottom"!==this.getState()&&(void 0!==this.settings.onBottom&&this.settings.onBottom.call(this),this.elements.container.removeClass(this.settings.classes.reset).removeClass(this.settings.classes.fixed).addClass(this.settings.classes.bottom),this.setState("bottom"),void 0!==this.settings.onChangeState&&this.settings.onChangeState.call({fixer:this,state:this.getState()})),this},reset:function(){return"default"!==this.getState()&&(void 0!==this.settings.onReset&&this.settings.onReset.call(this),this.elements.container.removeClass(this.settings.classes.fixed),"fixed"===this.getState()&&this.elements.container.addClass(this.settings.classes.reset),this.setState("default"),void 0!==this.settings.onChangeState&&this.settings.onChangeState.call({fixer:this,state:this.getState()})),this}},t.fn.fixer=function(e){return new t.Fixer(t(this),e)}}(jQuery);