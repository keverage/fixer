!function(t){"use strict";t.Fixer=function(e,i){return this.elements={fixer:e,container:null},t.extend(this.settings={},t.Fixer.defaults,i),this.state="default",this.scrollTop=0,this.previousScrollTop=0,this.fixerTop=0,this.fixerBottom=0,this.prepareOptions()&&this.init(),this},t.Fixer.defaults={container:void 0,from:void 0,to:void 0,reverse:!1,classes:{prefix:"fixer",container:"{prefix}-container",element:"{prefix}-element",input:"is-input",fixed:"is-fixed",bottom:"is-bottom"},afterEventsHandler:void 0,onScroll:void 0,onFixed:void 0,onBottom:void 0,onReset:void 0},t.Fixer.prototype={prepareOptions:function(){var e=this;return t.each(e.settings.classes,function(t,i){"string"==typeof i&&(e.settings.classes[t]=i.replace(/{prefix}/,e.settings.classes.prefix))}),!0},init:function(){this.elements.container=void 0!==this.settings.container&&this.settings.container.length?this.settings.container:this.elements.fixer.parent(),this.elements.container.addClass(this.settings.classes.container),this.elements.fixer.addClass(this.settings.classes.element),this.setFixerTop(),this.setFixerBottom(),this.requestAnimationFramePolyfill(),this.eventsHander()},requestAnimationFramePolyfill:function(){var t=0,e=0,i=["ms","moz","webkit"];for(e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),s=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+s)},s);return t=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},setFixerTop:function(){void 0===this.settings.from?this.fixerTop=this.elements.fixer.offset().top:this.settings.from<0?this.fixerTop=parseInt(this.elements.fixer.offset().top+this.settings.from):this.fixerTop=this.settings.from},setFixerBottom:function(){void 0===this.settings.to?this.fixerBottom=parseInt(this.elements.container.outerHeight()-this.elements.fixer.outerHeight()):this.settings.to<0?this.fixerBottom=parseInt(this.elements.container.outerHeight()-this.elements.fixer.outerHeight()+this.settings.to):this.fixerBottom=this.settings.to,this.fixerBottom+=this.fixerTop},eventsHander:function(){var e=this,i=!1;t(window).on({"scroll.fixer":function(){var t=this;window.requestAnimationFrame(function(){e.scrollTop=t.scrollY,e.settings.reverse?(e.previousScrollTop>e.scrollTop?e.toFixed():(e.previousScrollTop<e.scrollTop||e.scrollTop<e.settings.from)&&e.toReset(),e.previousScrollTop=e.scrollTop):e.scrollTop>=e.fixerTop&&e.scrollTop<e.fixerBottom?e.toFixed():e.scrollTop>=e.fixerBottom?e.toBottom():e.toReset(),void 0!==e.settings.onScroll&&e.settings.onScroll.call({Fixer:e,event:t,state:e.state})})},"touchstart.fixer":function(){i===!1&&(i=!0,e.elements.container.find(":input").on("focus blur",function(){e.elements.container.toggleClass(e.settings.classes.input)}))}}),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({Fixer:e,elements:e.elements})},toFixed:function(){this.state="fixed",this.elements.container.removeClass(this.settings.classes.bottom).addClass(this.settings.classes.fixed),void 0!==this.settings.onFixed&&this.settings.onFixed.call(this)},toBottom:function(){this.state="bottom",this.elements.container.removeClass(this.settings.classes.fixed).addClass(this.settings.classes.bottom),void 0!==this.settings.onBottom&&this.settings.onBottom.call(this)},toReset:function(){this.state="default",this.elements.container.removeClass(this.settings.classes.fixed),void 0!==this.settings.onReset&&this.settings.onReset.call(this)}},t.fn.fixer=function(e){return new t.Fixer(t(this),e)}}(jQuery);